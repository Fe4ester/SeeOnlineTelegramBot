# SeeOnlineTelegramBot

## О проекте
SeeOnlineTelegramBot — это телеграм-бот, разработанный для взаимодействия с внешним API (SeeOnlineApi).
Основная идея проекта — разделение логики между ботами и центральным сервисом, что позволит в будущем легко масштабировать систему, добавляя новые боты без дублирования кода и данных.

### Основные компоненты
1. **SeeOnlineApi** — внешний сервис, отвечающий за взаимодействие с базой данных и обработку фоновых задач.
2. **SeeOnlineTelegramBot** — сам бот, реализующий бизнес-логику и отвечающий за взаимодействие с пользователем.

## Архитектура бота
Бот построен на основе модульной архитектуры, где каждая группа файлов отвечает за конкретную функциональность.

### Основные модули
- **Handlers (`bot/handlers/`)**  
  Отвечает за обработку команд и событий от пользователя. Разделены на группы:
  - `admin/` — обработка команд администратора
  - `system/` — системные команды (например, старт, помощь)

- **Middlewares (`bot/middlewares/`)**  
  Позволяют обрабатывать запросы перед их попаданием в хэндлеры. Например, в `whitelist_middleware.py` можно проверять, имеет ли пользователь доступ к боту.

- **States (`bot/states/`)**  
  Определяют возможные состояния пользователей при работе с ботом. Используются для пошагового взаимодействия.

- **Keyboards (`bot/keyboards/`)**  
  Хранит все inline-клавиатуры и стандартные кнопки, используемые в боте.

- **Services (`bot/services/`)**  
  Содержит код, отвечающий за взаимодействие с внешним API (`external_service_client.py`). Адрес API указывается в `.env` под переменной `EXTERNAL_SERVICE_API_URL`.

- **Texts (`bot/texts/`)**  
  Содержит текстовые шаблоны сообщений (`admin_texts.py`, `system_texts.py`).

- **Utils (`bot/utils/`)**  
  Содержит вспомогательные функции (Логирование, кэширование и т.д).

- **Config (`bot/config/`)**  
  Файл `settings.py` для хранения конфигурации проекта.

## Запуск бота

Бот поддерживает несколько способов запуска:

1. **Локальный запуск**  
   ```bash
   python src/main.py
   ```

2. **Запуск через Docker**  
   ```bash
   docker-compose up --build
   ```
   
3. **Запуск с использованием Makefile**  
   (будет добавлен в будущем, позволит автоматизировать команды)

## Планы на будущее
- **Добавление новых ботов**
  - Планируется создание новых ботов, использующих SeeOnlineApi.
- **Улучшение логирования**
  - Добавление структурированного логирования и мониторинга.
- **Расширение функциональности API**
  - Улучшение взаимодействия с базой данных и обработка новых типов данных.
- **Интеграция CI/CD**
  - Автоматизация тестирования и деплоя бота.
- **Оптимизация кода**
  - Улучшение производительности за счёт рефакторинга и использования асинхронных операций.

## Контакты
Если у вас есть вопросы или предложения, пишите в Issues или создавайте Pull Request.

